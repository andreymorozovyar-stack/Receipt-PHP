# –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —á–µ–∫–æ–≤ (Receipt Recognition)

[![PHP](https://img.shields.io/badge/PHP-7.4%2B-blue.svg)](https://www.php.net/)
[![Slim Framework](https://img.shields.io/badge/Slim-4.0-green.svg)](https://www.slimframework.com/)
[![Tesseract OCR](https://img.shields.io/badge/Tesseract-OCR-orange.svg)](https://github.com/tesseract-ocr/tesseract)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

> **–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞—Å—Å–æ–≤—ã—Ö —á–µ–∫–æ–≤ –Ω–∞ PHP —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Tesseract OCR. –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–æ–º–µ—Ä —á–µ–∫–∞, –¥–∞—Ç–∞, –ò–ù–ù, —Å—É–º–º—ã, —É—Å–ª—É–≥–∏) –∏ QR-–∫–æ–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ –§–ù–°. REST API –Ω–∞ Slim Framework 4, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, Docker –∏ Serverless –ø–æ–¥–¥–µ—Ä–∂–∫–∞.

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å —á–µ–∫–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PHP, Tesseract OCR –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ QR-–∫–æ–¥–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –§–ù–°.

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Receipt Recognition** ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∫–∞—Å—Å–æ–≤—ã—Ö —á–µ–∫–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é –æ–ø—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ (OCR) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ–∫–æ–≤ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

### –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ–∫–æ–≤ –¥–ª—è:
- –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–æ–≥–æ —É—á–µ—Ç–∞
- –§–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —É—á–µ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∏ —á–µ–∫–æ–≤ —á–µ—Ä–µ–∑ –§–ù–°

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ API
2. **OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** ‚Äî Tesseract OCR –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏)
3. **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ QR-–∫–æ–¥–∞** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç QR-–∫–æ–¥ —Å —á–µ–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –§–ù–°
4. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:
   - –ù–æ–º–µ—Ä —á–µ–∫–∞
   - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
   - –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü–∞ –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (–§–ò–û, –ò–ù–ù)
   - –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥/—Ç–æ–≤–∞—Ä–æ–≤ —Å —Å—É–º–º–∞–º–∏
   - –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
   - –†–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç–µ–ª–µ —á–µ–∫–∞
5. **–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º PHP —Å—Ç–µ–∫–µ:
- **Slim Framework 4** ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –º–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è REST API
- **Tesseract OCR** ‚Äî –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ OCR —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤
- **PSR-7/PSR-15** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã PHP –¥–ª—è HTTP —Å–æ–æ–±—â–µ–Ω–∏–π –∏ middleware
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **Serverless** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ–ø–ª–æ—è –≤ Yandex Cloud Serverless Containers

### –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞ 2-5 —Å–µ–∫—É–Ω–¥
- ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** ‚Äî –¥–æ 95% —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º –∫–∞—á–µ—Å—Ç–≤–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —á–µ–∫–æ–≤
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ serverless –¥–µ–ø–ª–æ—è

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞** —Å —á–µ–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏) —á–µ—Ä–µ–∑ Tesseract OCR
- ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –Ω–æ–º–µ—Ä —á–µ–∫–∞, –¥–∞—Ç–∞, –≤—Ä–µ–º—è, –ò–ù–ù, —Å—É–º–º—ã, —É—Å–ª—É–≥–∏
- ‚úÖ **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ QR-–∫–æ–¥–æ–≤** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –§–ù–° (zbarimg –∏–ª–∏ PHP –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- ‚úÖ **REST API** –Ω–∞ –±–∞–∑–µ Slim Framework 4 –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ **Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ **Serverless –¥–µ–ø–ª–æ–π** –≤ Yandex Cloud Serverless Containers
- ‚úÖ **PSR-7 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã PHP

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP >= 7.4
- Tesseract OCR (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ)
- –Ø–∑—ã–∫–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã Tesseract: `rus`, `eng`
- zbar-tools (–¥–ª—è QR-–∫–æ–¥–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `khanamiryan/qrcode-detector-decoder`
- Composer
- Slim Framework 4 (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Composer)

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫
- **PHP 7.4+** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Slim Framework 4** ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –º–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è REST API
- **Tesseract OCR** ‚Äî –¥–≤–∏–∂–æ–∫ –æ–ø—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤
- **Composer** ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π PHP

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `thiagoalessio/tesseract_ocr` ‚Äî PHP –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è Tesseract OCR
- `khanamiryan/qrcode-detector-decoder` ‚Äî PHP –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è QR-–∫–æ–¥–æ–≤
- `slim/slim` ‚Äî Slim Framework 4
- `slim/psr7` ‚Äî PSR-7 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Slim

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Apache** ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è production
- **PHP Built-in Server** ‚Äî –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ serverless
- **Yandex Cloud Serverless Containers** ‚Äî serverless –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:**
```bash
docker-compose up -d
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
docker build -t receipt-php .
docker run -d -p 8080:80 --name receipt-php receipt-php
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
docker-compose down
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PHP —Å–µ—Ä–≤–µ—Ä (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

**Windows:**
```bash
start_server.bat
```

**Linux/macOS:**
```bash
chmod +x start_server.sh
./start_server.sh
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
php -S localhost:8080 router.php
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í–µ–±-—Å–µ—Ä–≤–µ—Ä (Apache/Nginx)

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
receipt-php/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ OcrService.php          # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Tesseract OCR
‚îÇ   ‚îú‚îÄ‚îÄ QrCodeService.php       # –°–µ—Ä–≤–∏—Å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è QR-–∫–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ Parser.php              # –ü–∞—Ä—Å–µ—Ä —Ç–µ–∫—Å—Ç–∞ —á–µ–∫–∞ (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ fixtures/               # –¢–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_api.php            # –¢–µ—Å—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ test_ocr.php            # –¢–µ—Å—Ç—ã OCR
‚îÇ   ‚îú‚îÄ‚îÄ test_parser.php          # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ run_all_tests.php       # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ tessdata/                   # –Ø–∑—ã–∫–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã Tesseract (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ rus.traineddata
‚îÇ   ‚îî‚îÄ‚îÄ eng.traineddata
‚îú‚îÄ‚îÄ api.php                     # API endpoint (Slim Framework)
‚îú‚îÄ‚îÄ router.php                  # –†–æ—É—Ç–µ—Ä –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ PHP —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ index.html                  # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ config.php                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞—Ç—å –∏–∑ config.php.example)
‚îú‚îÄ‚îÄ composer.json               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ PHP
‚îú‚îÄ‚îÄ Dockerfile                  # Docker –æ–±—Ä–∞–∑ –¥–ª—è production (Apache)
‚îú‚îÄ‚îÄ Dockerfile.serverless       # Docker –æ–±—Ä–∞–∑ –¥–ª—è Yandex Cloud Serverless
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .htaccess                  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Apache
‚îú‚îÄ‚îÄ SERVERLESS_DEPLOYMENT.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –≤ serverless
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tesseract OCR

**Windows:**
1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å [GitHub](https://github.com/UB-Mannheim/tesseract/wiki)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Tesseract (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `C:\Program Files\Tesseract-OCR`)
3. –î–æ–±–∞–≤—å—Ç–µ –ø—É—Ç—å –∫ `tesseract.exe` –≤ PATH –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –≤ `config.php`

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get update
sudo apt-get install tesseract-ocr tesseract-ocr-rus tesseract-ocr-eng
```

**macOS:**
```bash
brew install tesseract tesseract-lang
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ zbar-tools (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**Linux:**
```bash
sudo apt-get install zbar-tools
```

**macOS:**
```bash
brew install zbar
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π PHP

```bash
cd experiments/receipt-php
composer install
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
cp config.php.example config.php
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ config.php, —É–∫–∞–∑–∞–≤ –ø—É—Ç–∏ –∫ Tesseract
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8080`

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ–∫–æ–≤ —á–µ—Ä–µ–∑ drag & drop –∏–ª–∏ –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –í–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –§–ù–°

### REST API

API –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–µ Slim Framework 4 –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PSR-7 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã.

#### Endpoints

**Health Check:**
```bash
GET /api/health
```

**–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ–∫–∞:**
```bash
POST /api/recognize
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `file` (multipart/form-data, required): –§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ–∫–∞ (PNG, JPG, JPEG)

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (curl)

```bash
curl -X POST "http://localhost:8080/api/recognize" \
  -F "file=@path/to/receipt.png"
```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

```json
{
  "success": true,
  "data": {
    "receipt_number": "ABC123XYZ456",
    "date": "15.01.25",
    "time": "12:30",
    "seller_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "seller_inn": "123456789012",
    "buyer_inn": "987654321098",
    "services": [
      {
        "name": "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç –∏ –æ–∫–∞–∑–∞–Ω–∏–µ —É—Å–ª—É–≥",
        "amount": "1000.00"
      }
    ],
    "total_amount": "1000.00",
    "tax_mode": "–ù–ü–î",
    "check_former": "–ÆMoney",
    "check_former_inn": "111111111111",
    "fns_url": "https://lknpd.nalog.ru/api/v1/receipt/...",
    "raw_text": "–ü–æ–ª–Ω—ã–π —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç..."
  }
}
```

## üìä –ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

–°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —á–µ–∫–∞:

- **–ù–æ–º–µ—Ä —á–µ–∫–∞** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–µ–∫–∞
- **–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è** ‚Äî –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ–∫–∞
- **–§–ò–û –ø—Ä–æ–¥–∞–≤—Ü–∞/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è** ‚Äî –∏–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞
- **–ò–ù–ù –ø—Ä–æ–¥–∞–≤—Ü–∞** ‚Äî –ò–ù–ù –ø—Ä–æ–¥–∞–≤—Ü–∞ (–ù–ü–î)
- **–ò–ù–ù –ø–æ–∫—É–ø–∞—Ç–µ–ª—è** ‚Äî –ò–ù–ù –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- **–°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥/—Ç–æ–≤–∞—Ä–æ–≤** ‚Äî –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ —Å—É–º–º–∞ –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–∏
- **–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞** ‚Äî –æ–±—â–∞—è —Å—É–º–º–∞ —á–µ–∫–∞
- **–†–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è** ‚Äî —Ä–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è (–ù–ü–î, –£–°–ù –∏ —Ç.–¥.)
- **–§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç–µ–ª—å —á–µ–∫–∞** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ–∫–∞
- **–ò–ù–ù —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç–µ–ª—è** ‚Äî –ò–ù–ù —Å–∏—Å—Ç–µ–º—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ–∫–∞
- **–°—Å—ã–ª–∫–∞ –Ω–∞ –§–ù–°** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ–∫–∞ –≤ –§–ù–° (–∏–∑ QR-–∫–æ–¥–∞)

## üöÄ –î–µ–ø–ª–æ–π

### Docker Production

```bash
docker build -t receipt-php .
docker run -d -p 8080:80 --name receipt-php receipt-php
```

### Yandex Cloud Serverless Containers

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –≤ Yandex Cloud Serverless Containers –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [SERVERLESS_DEPLOYMENT.md](SERVERLESS_DEPLOYMENT.md).

**–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**

1. –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ –¥–ª—è serverless:
```bash
docker build -f Dockerfile.serverless -t receipt-php-serverless:latest .
```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤ Container Registry:
```bash
docker tag receipt-php-serverless:latest cr.yandex/<REGISTRY_ID>/receipt-php:latest
docker push cr.yandex/<REGISTRY_ID>/receipt-php:latest
```

3. –î–µ–ø–ª–æ–π —Ä–µ–≤–∏–∑–∏–∏:
```bash
yc serverless container revision deploy \
    --container-name receipt-php \
    --image cr.yandex/<REGISTRY_ID>/receipt-php:latest \
    --memory 1GB \
    --cores 1 \
    --execution-timeout 60s \
    --service-account-id <SERVICE_ACCOUNT_ID>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
php tests/run_all_tests.php
```

### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –¢–µ—Å—Ç API
php tests/test_api.php

# –¢–µ—Å—Ç OCR
php tests/test_ocr.php

# –¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞
php tests/test_parser.php

# –¢–µ—Å—Ç QR-–∫–æ–¥–æ–≤
php tests/test_qrcode.php
```

## üîç –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
php -S localhost:8080 router.php
```

### –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫ –≤ `api.php`:

```php
error_reporting(E_ALL);
ini_set('display_errors', 1);
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

- **PSR-4 Autoloading** ‚Äî –∫–ª–∞—Å—Å—ã –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º–µ–Ω `ReceiptRecognition\`
- **PSR-7** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ HTTP —Å–æ–æ–±—â–µ–Ω–∏–π
- **PSR-12** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è PHP

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–†–∞–∑–º–µ—Ä Docker –æ–±—Ä–∞–∑–∞**: ~290 MB (production)
- **–í—Ä–µ–º—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è**: 2-5 —Å–µ–∫—É–Ω–¥ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- **–¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è**: ~95% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `config.php`:

```php
return [
    'tesseract_path' => null,        // –ü—É—Ç—å –∫ tesseract.exe (Windows) –∏–ª–∏ null –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ
    'tessdata_dir' => null,         // –ü—É—Ç—å –∫ —è–∑—ã–∫–æ–≤—ã–º –ø–∞–∫–µ—Ç–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    'zbarimg_path' => null,         // –ü—É—Ç—å –∫ zbarimg (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    'languages' => ['rus', 'eng'],   // –Ø–∑—ã–∫–∏ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
];
```

## üÜö –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ Python –≤–µ—Ä—Å–∏–µ–π

- ‚úÖ **–ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** (~75-140 MB vs ~700-900 MB)
- ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** (2-5 —Å–µ–∫ vs 10-30 —Å–µ–∫)
- ‚úÖ **–ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å PHP –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- ‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç Docker** –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ **–ü—Ä–æ—â–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö PHP —Å–µ—Ä–≤–µ—Ä–∞—Ö
- ‚úÖ **–ú–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** (~60-100 MB vs ~500-1000 MB)

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –¢–æ—á–Ω–æ—Å—Ç—å Tesseract –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ, —á–µ–º —É EasyOCR
- –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Tesseract –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- QR-–∫–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç zbar-tools –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ–∫–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [SERVERLESS_DEPLOYMENT.md](SERVERLESS_DEPLOYMENT.md) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –≤ Yandex Cloud Serverless Containers
- [Slim Framework Documentation](https://www.slimframework.com/docs/v4/)
- [Tesseract OCR Documentation](https://tesseract-ocr.github.io/)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë§ –ê–≤—Ç–æ—Ä

Receipt Recognition Team

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Python –≤–µ—Ä—Å–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Tesseract OCR –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
